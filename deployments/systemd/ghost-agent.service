[Unit]
Description=Ghost Cloud Agent - VM Management Daemon
Documentation=https://github.com/iammahbubalam/ghost-agent
After=network-online.target libvirtd.service tailscaled.service
Wants=network-online.target
Requires=libvirtd.service

[Service]
Type=simple
User=root
Group=root

# Main service command
ExecStart=/usr/local/bin/ghost-agent --config /etc/ghost/agent.yaml

# Restart policy - always restart if crashes
Restart=always
RestartSec=10

# Resource limits
LimitNOFILE=65536
LimitNPROC=4096

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=ghost-agent

# Security hardening
NoNewPrivileges=true
PrivateTmp=true

# Environment
Environment="PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

[Install]
WantedBy=multi-user.target
